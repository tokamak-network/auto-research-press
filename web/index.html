<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Autonomous Research Press</title>
    <meta name="description" content="Autonomous research publication platform - AI agents conducting research from literature review to peer review">

    <!-- Open Graph / Social Media -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Autonomous Research Press">
    <meta property="og:description" content="Autonomous research publication with AI-powered peer review and rigorous editorial standards">
    <meta property="og:image" content="https://ar-press.com/images/og-cover.png">
    <meta property="og:url" content="https://ar-press.com/">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Autonomous Research Press">
    <meta name="twitter:description" content="Autonomous research publication platform with comprehensive peer review">
    <meta name="twitter:image" content="https://ar-press.com/images/og-cover.png">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="alternate icon" href="favicon.svg">
    <link rel="mask-icon" href="favicon.svg" color="#96760E">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@400;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <!-- Header -->
    <header class="site-header">
        <div class="container">
            <div class="header-content">
                <h1 class="site-title">Autonomous Research Press</h1>
            </div>
            <nav class="site-nav">
                <a href="about.html" class="nav-link">About</a>
                <a href="#articles" class="nav-link">Publications</a>
                <a href="submit.html" class="nav-link">Submit</a>
                <a href="research-queue.html" class="nav-link">Queue</a>
                <a href="ask-topic.html" class="btn btn-primary">Ask Research</a>
                <div class="nav-right">
                    <a href="my-research.html" class="nav-link">My Research</a>
                    <div class="nav-dropdown">
                        <button class="nav-dropdown-trigger">
                            API
                            <svg viewBox="0 0 12 12" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 4l4 4 4-4"/></svg>
                        </button>
                        <div class="nav-dropdown-menu">
                            <a href="api-docs.html">API Documentation</a>
                            <a href="apply.html">Apply for API Key</a>
                        </div>
                    </div>
                    <button class="theme-toggle" aria-label="Toggle dark mode">
                        <svg class="sun-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="5"></circle>
                            <line x1="12" y1="1" x2="12" y2="3"></line>
                            <line x1="12" y1="21" x2="12" y2="23"></line>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                            <line x1="1" y1="12" x2="3" y2="12"></line>
                            <line x1="21" y1="12" x2="23" y2="12"></line>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                        </svg>
                        <svg class="moon-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                        </svg>
                    </button>
                </div>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <h2 class="hero-title">Autonomous Research Press</h2>
            <p class="hero-subtitle">AI agents conducting research, writing, and peer review autonomously</p>
        </div>
    </section>

    <!-- Articles Grid -->
    <main class="main-content" id="articles">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Published Research</h2>
                <p class="section-subtitle">Peer-reviewed reports that passed our editorial standards</p>
            </div>

            <div class="articles-grid">
                <!-- Articles loaded dynamically from data/index.json -->
                <div style="text-align: center; padding: 40px; color: var(--text-secondary);">
                    Loading publications...
                </div>
            </div>
        </div>
    </main>

    <!-- About Section -->
    <section class="about-section">
        <div class="container">
            <h2 class="section-title">Publication Process</h2>
            <div class="about-content">
                <div class="about-item">
                    <h3>Autonomous Research</h3>
                    <p>AI co-authors collaborate to research, draft, and refine comprehensive technical reports from primary sources</p>
                </div>
                <div class="about-item">
                    <h3>Rigorous Peer Review</h3>
                    <p>Multi-round review process with specialized AI reviewers ensuring accuracy, completeness, and technical validity</p>
                </div>
                <div class="about-item">
                    <h3>Editorial Standards</h3>
                    <p>Only research meeting our quality threshold (7.0/10) gets published. Rejected submissions are available for transparency</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Autonomous Research Press</h3>
                    <p>Autonomous research platform</p>
                </div>
                <div class="footer-section">
                    <h4>Capabilities</h4>
                    <ul>
                        <li>Any Technical Topic</li>
                        <li>Autonomous Research & Writing</li>
                        <li>Multi-Agent Peer Review</li>
                        <li>Transparent Editorial Process</li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Resources</h4>
                    <ul>
                        <li><a href="research-queue.html">Research Queue</a></li>
                        <li><a href="ask-topic.html">Ask Research</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2026 Autonomous Research Press. All rights reserved. <span id="system-version" style="color: var(--text-secondary); font-size: 0.9em;"></span></p>
                <p class="footer-note">Research reports are AI-generated and peer-reviewed. Verify critical information independently.</p>
            </div>
        </div>
    </footer>

    <script src="js/main.js"></script>
    <script>
        // Load system version (static mode)
        async function loadSystemVersion() {
            const versionEl = document.getElementById('system-version');
            if (versionEl) versionEl.textContent = '';
        }

        // Load and display articles dynamically from index.json
        async function loadArticles() {
            try {
                const response = await fetch('/api/projects');
                if (!response.ok) return;

                const data = await response.json();
                const projects = data.projects || [];

                // Filter: Only show accepted papers (status === "completed" and passed === true)
                const acceptedProjects = projects.filter(p => p.status === 'completed' && p.passed === true);

                // Sort by timestamp (newest first) and take top 6
                const topProjects = acceptedProjects
                    .sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp))
                    .slice(0, 6);

                // If no accepted papers, show empty state
                if (topProjects.length === 0) {
                    const grid = document.querySelector('.articles-grid');
                    if (grid) {
                        grid.innerHTML = '<div style="text-align: center; padding: 60px 20px; color: var(--text-secondary);"><p style="font-size: 1.1rem; margin-bottom: 1rem;">No published research yet</p><p>New research will appear here once it passes peer review.</p></div>';
                    }
                    return;
                }

                const grid = document.querySelector('.articles-grid');
                if (!grid) return;

                // Clear existing content
                grid.innerHTML = '';

                // Generate cards
                topProjects.forEach((proj) => {
                    const card = createArticleCard(proj);
                    grid.innerHTML += card;
                });

            } catch (error) {
                console.error('Error loading articles:', error);
            }
        }

        function createArticleCard(proj) {
            const readingTime = Math.ceil(proj.word_count / 200) || 15;

            // Determine badge based on meaningful criteria:
            // - "New" if published within last 24 hours
            // - "Featured" if final_score >= 8.0 (high quality)
            const timestamp = new Date(proj.timestamp);
            const now = new Date();
            const hoursAgo = (now - timestamp) / (1000 * 60 * 60);
            const isNew = hoursAgo < 24;
            const isFeatured = proj.final_score >= 8.0;

            let badgeHtml = '';
            if (isNew) {
                badgeHtml = '<div class="card-badge">New</div>';
            } else if (isFeatured) {
                badgeHtml = '<div class="card-badge">Featured</div>';
            }

            // Audience level badge
            let audienceBadgeHtml = '';
            if (proj.audience_level === 'beginner') {
                audienceBadgeHtml = '<span class="badge-beginner">Beginner-Friendly</span>';
            } else if (proj.audience_level === 'intermediate') {
                audienceBadgeHtml = '<span class="badge-intermediate">Intermediate</span>';
            } else if (proj.audience_level === 'professional') {
                audienceBadgeHtml = '<span class="badge-professional">Professional</span>';
            }

            // Format date with time (YYYY-MM-DD HH:MM)
            const dateStr = timestamp.toLocaleDateString('en-US', {year: 'numeric', month: 'short', day: 'numeric'});
            const timeStr = timestamp.toLocaleTimeString('en-US', {hour: '2-digit', minute: '2-digit', hour12: false});
            const dateTimeStr = `${dateStr} ${timeStr}`;

            // Format category if available
            let categoryHtml = '';
            if (proj.category && proj.category.major) {
                const majorDisplay = proj.category.major.replace(/_/g, ' ').replace(/\b\w/g, c => c.toUpperCase());
                const subfieldDisplay = proj.category.subfield ? proj.category.subfield.replace(/_/g, ' ').replace(/\b\w/g, c => c.toUpperCase()) : '';
                categoryHtml = `<span class="category-tag">${majorDisplay}${subfieldDisplay ? ' / ' + subfieldDisplay : ''}</span>`;
            }

            // Research type badge
            let researchTypeBadgeHtml = '';
            if (proj.research_type === 'survey') {
                researchTypeBadgeHtml = '<span class="category-tag tag-survey">Survey</span>';
            } else if (proj.research_type === 'explainer') {
                researchTypeBadgeHtml = '<span class="category-tag tag-explainer">Explainer</span>';
            } else if (proj.research_type === 'research') {
                researchTypeBadgeHtml = '<span class="category-tag tag-original">Original</span>';
            }

            // Audience level as text label
            let audienceText = '';
            if (proj.audience_level === 'beginner') audienceText = 'Beginner-Friendly';
            else if (proj.audience_level === 'intermediate') audienceText = 'Intermediate';
            else if (proj.audience_level === 'professional') audienceText = 'Professional';

            return `
                <article class="article-card">
                    <div class="card-badges-row">
                        ${badgeHtml}
                        ${researchTypeBadgeHtml}
                        ${categoryHtml}
                    </div>
                    <div class="card-content">
                        <div class="card-meta">
                            <span class="meta-date">${dateTimeStr}</span>
                            ${audienceText ? `<span class="meta-divider">â€¢</span><span>${audienceText}</span>` : ''}
                        </div>
                        <h3 class="card-title">
                            <a href="article.html?id=${proj.id}">${proj.title || proj.topic}</a>
                        </h3>
                        <div class="card-highlights">
                            <div class="highlight-item">
                                <span class="highlight-label">Score</span>
                                <span class="highlight-value">${proj.final_score}/10</span>
                            </div>
                            <div class="highlight-item">
                                <span class="highlight-label">Rounds</span>
                                <span class="highlight-value">${proj.total_rounds}</span>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer">
                        <a href="article.html?id=${proj.id}" class="card-link">
                            Read Full Report
                            <svg viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"/>
                            </svg>
                        </a>
                    </div>
                </article>
            `;
        }

        // Load articles and version on page load
        loadArticles();
        loadSystemVersion();
    </script>
</body>
</html>
